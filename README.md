# å’–å•¡åç‰‡æ‰¹é‡ç¼–è¾‘å™¨

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å’–å•¡åç‰‡æ‰¹é‡ç¼–è¾‘å’ŒPDFç”Ÿæˆå·¥å…·ï¼Œæ”¯æŒå…¨å±€è®¾å®šå’Œå•ç‹¬è®¾å®šæ¨¡å¼ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

### ğŸ–¼ï¸ å›¾ç‰‡ç®¡ç†
- æ”¯æŒä»æœ¬åœ°`img/`æ–‡ä»¶å¤¹åŠ è½½å›¾ç‰‡ï¼ˆ1.jpg - 8.jpgï¼‰
- å¤šé€‰å›¾ç‰‡åŠŸèƒ½
- æ¯å¼ å›¾ç‰‡ç‹¬ç«‹è®¾ç½®åˆ¶ä½œæ•°é‡

### ğŸ“ æ–‡å­—ç¼–è¾‘
- **çƒ˜ç„™æ—¥æœŸ**ï¼šä½¿ç”¨æ—¥å†æ§ä»¶ï¼Œè‡ªåŠ¨æ ¼å¼åŒ–ä¸º"çƒ˜ç„™æ—¥æœŸï¼šå¹´æœˆæ—¥"
- **é‡é‡**ï¼šæ•°å­—è¾“å…¥ï¼Œè‡ªåŠ¨æ·»åŠ "g"å•ä½
- **å…¨å±€è®¾å®š**ï¼šæ‰€æœ‰å›¾ç‰‡ä½¿ç”¨ç›¸åŒè®¾ç½®
- **å•ç‹¬è®¾å®š**ï¼šæ¯å¼ å›¾ç‰‡çš„æ¯ä¸ªå‰¯æœ¬éƒ½å¯ä»¥è®¾ç½®ä¸åŒçš„çƒ˜ç„™æ—¥æœŸå’Œé‡é‡

### ğŸ‘ï¸ é¢„è§ˆåŠŸèƒ½
- æ‰‹åŠ¨é¢„è§ˆæ›´æ–°ï¼Œé¿å…è¾“å…¥æ—¶é¢‘ç¹åˆ·æ–°
- 1:1ç²¾ç¡®é¢„è§ˆï¼Œä¸æœ€ç»ˆPDFå®Œå…¨ä¸€è‡´
- æ˜¾ç¤ºæ¯ä¸ªå‰¯æœ¬çš„ç‹¬ç«‹é¢„è§ˆ
- ç‚¹å‡»å›¾ç‰‡å¯æ”¾å¤§æŸ¥çœ‹

### ğŸ“„ PDFç”Ÿæˆ
- æ— è¾¹è·A4å¸ƒå±€ï¼Œ2Ã—4ç½‘æ ¼æ’åˆ—
- è‡ªåŠ¨æ·»åŠ 2pxé»‘è‰²è£å‰ªçº¿ï¼Œæ–¹ä¾¿æ‰“å°åè£å‰ª
- æ–‡ä»¶åè‡ªåŠ¨ä½¿ç”¨å½“å¤©æ—¥æœŸæ ¼å¼ï¼ˆYYYY-MM-DD.pdfï¼‰

### ğŸ“Š æ—¥å¿—è®°å½•
- è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„logæ–‡ä»¶
- ä¿å­˜åˆ°æœåŠ¡å™¨`log/`æ–‡ä»¶å¤¹
- æ–‡ä»¶åå¸¦åºå·ï¼šYYYY-MM-DD-01.logï¼ˆæ¯å¤©é‡ç½®è®¡æ•°å™¨ï¼‰
- åŒ…å«å®Œæ•´çš„ç”Ÿæˆä¿¡æ¯å’Œå›¾ç‰‡è¯¦æƒ…
- ç½‘ç»œå¤±è´¥æ—¶è‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°ä½œä¸ºå¤‡ä»½

## å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. å¯åŠ¨æœåŠ¡å™¨
```bash
npm start
```

### 3. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000

## æ‰“åŒ…å’Œéƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šç›´æ¥éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å‡†å¤‡æœåŠ¡å™¨ç¯å¢ƒ
```bash
# å®‰è£…Node.js (æ¨èç‰ˆæœ¬ 16+)
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# æˆ–è€…ä½¿ç”¨yum (CentOS/RHEL)
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs
```

#### 2. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
```bash
# ä½¿ç”¨scpä¸Šä¼ æ–‡ä»¶
scp -r ./coffee-card-editor user@your-server:/var/www/

# æˆ–ä½¿ç”¨gitå…‹éš†
git clone <your-repo-url> /var/www/coffee-card-editor
cd /var/www/coffee-card-editor
```

#### 3. å®‰è£…ä¾èµ–å¹¶å¯åŠ¨
```bash
cd /var/www/coffee-card-editor
npm install --production
npm start
```

#### 4. é…ç½®åå‘ä»£ç†ï¼ˆNginxï¼‰
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

#### 5. ä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹ï¼ˆæ¨èï¼‰
```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start server.js --name "coffee-card-editor"

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save

# æŸ¥çœ‹çŠ¶æ€
pm2 status
pm2 logs coffee-card-editor
```

### æ–¹æ³•äºŒï¼šDockeréƒ¨ç½²

#### 1. åˆ›å»ºDockerfile
```dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install --production

COPY . .

EXPOSE 3000

CMD ["npm", "start"]
```

#### 2. æ„å»ºå’Œè¿è¡Œ
```bash
# æ„å»ºé•œåƒ
docker build -t coffee-card-editor .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name coffee-card-editor \
  -p 3000:3000 \
  -v $(pwd)/log:/app/log \
  -v $(pwd)/img:/app/img \
  coffee-card-editor
```

#### 3. ä½¿ç”¨Docker Compose
```yaml
# docker-compose.yml
version: '3.8'
services:
  coffee-card-editor:
    build: .
    ports:
      - "3000:3000"
    volumes:
      - ./log:/app/log
      - ./img:/app/img
    restart: unless-stopped
```

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### æ–¹æ³•ä¸‰ï¼šé™æ€æ–‡ä»¶éƒ¨ç½²

#### 1. ä¿®æ”¹æœåŠ¡å™¨é…ç½®
```javascript
// ä¿®æ”¹server.jsï¼Œæ·»åŠ é™æ€æ–‡ä»¶æœåŠ¡
app.use(express.static('public'));

// å°†å‰ç«¯æ–‡ä»¶ç§»åŠ¨åˆ°publicç›®å½•
// public/
//   â”œâ”€â”€ index.html
//   â”œâ”€â”€ style.css
//   â”œâ”€â”€ script.js
//   â””â”€â”€ img/
```

#### 2. éƒ¨ç½²åˆ°CDNæˆ–é™æ€æ‰˜ç®¡
```bash
# ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSS
ossutil cp -r ./public/ oss://your-bucket/coffee-card-editor/

# ä¸Šä¼ åˆ°è…¾è®¯äº‘COS
coscmd upload -r ./public/ /coffee-card-editor/

# ä¸Šä¼ åˆ°AWS S3
aws s3 sync ./public/ s3://your-bucket/coffee-card-editor/
```

## ç”Ÿäº§ç¯å¢ƒé…ç½®

### 1. ç¯å¢ƒå˜é‡é…ç½®
```bash
# åˆ›å»º.envæ–‡ä»¶
NODE_ENV=production
PORT=3000
LOG_DIR=/var/log/coffee-card-editor
```

### 2. æ—¥å¿—ç®¡ç†
```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
sudo mkdir -p /var/log/coffee-card-editor
sudo chown -R $USER:$USER /var/log/coffee-card-editor

# é…ç½®æ—¥å¿—è½®è½¬
sudo nano /etc/logrotate.d/coffee-card-editor
```

```bash
# /etc/logrotate.d/coffee-card-editor
/var/log/coffee-card-editor/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 $USER $USER
}
```

### 3. å®‰å…¨é…ç½®
```bash
# å®‰è£…é˜²ç«å¢™
sudo ufw enable
sudo ufw allow 22
sudo ufw allow 80
sudo ufw allow 443

# é…ç½®SSLè¯ä¹¦ï¼ˆLet's Encryptï¼‰
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### 4. ç›‘æ§å’Œå¤‡ä»½
```bash
# ä½¿ç”¨PM2ç›‘æ§
pm2 install pm2-logrotate
pm2 set pm2-logrotate:max_size 10M
pm2 set pm2-logrotate:retain 7

# è®¾ç½®å®šæ—¶å¤‡ä»½
crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œ
0 2 * * * tar -czf /backup/coffee-card-editor-$(date +\%Y\%m\%d).tar.gz /var/www/coffee-card-editor
```

## æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”œâ”€â”€ style.css           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ script.js           # ä¸»è¦é€»è¾‘
â”œâ”€â”€ server.js           # Node.jsæœåŠ¡å™¨
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®
â”œâ”€â”€ img/                # å›¾ç‰‡æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ 1.jpg
â”‚   â”œâ”€â”€ 2.jpg
â”‚   â””â”€â”€ ...
â””â”€â”€ log/                # æ—¥å¿—æ–‡ä»¶å¤¹ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
    â”œâ”€â”€ 2024-01-15.log
    â””â”€â”€ ...
```

## ä½¿ç”¨æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å›¾ç‰‡
- ä»8å¼ é¢„è®¾å›¾ç‰‡ä¸­é€‰æ‹©éœ€è¦çš„å›¾ç‰‡
- æ”¯æŒå¤šé€‰

### ç¬¬äºŒæ­¥ï¼šè®¾ç½®æ•°é‡
- ä¸ºæ¯å¼ é€‰ä¸­çš„å›¾ç‰‡è®¾ç½®åˆ¶ä½œæ•°é‡
- å®æ—¶æ˜¾ç¤ºæ€»æ•°é‡ç»Ÿè®¡

### ç¬¬ä¸‰æ­¥ï¼šè¾“å…¥æ–‡æœ¬
- é€‰æ‹©è®¾å®šæ¨¡å¼ï¼ˆå…¨å±€/å•ç‹¬ï¼‰
- **å…¨å±€è®¾å®š**ï¼šæ‰€æœ‰å›¾ç‰‡ä½¿ç”¨ç›¸åŒçš„çƒ˜ç„™æ—¥æœŸå’Œé‡é‡
- **å•ç‹¬è®¾å®š**ï¼šæ¯å¼ å›¾ç‰‡çš„æ¯ä¸ªå‰¯æœ¬éƒ½å¯ä»¥è®¾ç½®ä¸åŒçš„çƒ˜ç„™æ—¥æœŸå’Œé‡é‡
- ç‚¹å‡»"æ›´æ–°é¢„è§ˆ"æŸ¥çœ‹æ•ˆæœï¼ˆæ˜¾ç¤ºæ¯ä¸ªå‰¯æœ¬çš„é¢„è§ˆï¼‰

### ç¬¬å››æ­¥ï¼šå¯¼å‡ºPDF
- ç”ŸæˆPDFæ–‡ä»¶ï¼ˆè‡ªåŠ¨åˆ†é¡µï¼Œè¶…è¿‡8å¼ å›¾ç‰‡æ—¶æ­£ç¡®åˆ†é¡µï¼‰
- è‡ªåŠ¨ä¿å­˜logæ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼ˆå¸¦åºå·ï¼šYYYY-MM-DD-01.logï¼‰
- ä¸‹è½½PDFåˆ°æœ¬åœ°ï¼ˆæ–‡ä»¶åï¼šYYYY-MM-DD.pdfï¼‰

## APIæ¥å£

### ä¿å­˜æ—¥å¿—
```
POST /api/save-log
Content-Type: application/json

{
  "filename": "2024-01-15.log",
  "content": "æ—¥å¿—å†…å®¹...",
  "logData": {...}
}
```

### è·å–æ—¥å¿—åˆ—è¡¨
```
GET /api/logs
```

### ä¸‹è½½æ—¥å¿—æ–‡ä»¶
```
GET /api/logs/:filename
```

## æ—¥å¿—æ–‡ä»¶æ ¼å¼

æ—¥å¿—æ–‡ä»¶åŒ…å«ä»¥ä¸‹è¯¦ç»†ä¿¡æ¯ï¼š
- ç”Ÿæˆæ—¶é—´å’Œæ—¶é—´æˆ³
- PDFæ–‡ä»¶å
- è®¾å®šæ¨¡å¼ï¼ˆå…¨å±€/å•ç‹¬ï¼‰
- å›¾ç‰‡æ•°é‡å’Œæ€»åˆ¶ä½œæ•°é‡
- PDFé¡µæ•°
- æ¯å¼ å›¾ç‰‡çš„è¯¦ç»†ä¿¡æ¯
- å…¨å±€è®¾å®šæˆ–å•ç‹¬è®¾å®šè¯¦æƒ…

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šHTML5, CSS3, JavaScript (ES6+)
- **åç«¯**ï¼šNode.js, Express
- **PDFç”Ÿæˆ**ï¼šjsPDF
- **å›¾ç‰‡å¤„ç†**ï¼šCanvas API

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿`img/`æ–‡ä»¶å¤¹ä¸­æœ‰1.jpgåˆ°8.jpgçš„å›¾ç‰‡æ–‡ä»¶
2. æœåŠ¡å™¨ä¼šè‡ªåŠ¨åˆ›å»º`log/`æ–‡ä»¶å¤¹
3. å¦‚æœæœåŠ¡å™¨ä¿å­˜å¤±è´¥ï¼Œlogæ–‡ä»¶ä¼šè‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°
4. PDFæ–‡ä»¶åä½¿ç”¨å½“å¤©æ—¥æœŸï¼Œé¿å…è¦†ç›–
5. è£å‰ªçº¿ä¸º2pxé»‘è‰²å®çº¿ï¼Œé€‚åˆæ‰“å°åè£å‰ª
6. å•ç‹¬è®¾å®šæ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªå‰¯æœ¬éƒ½æœ‰ç‹¬ç«‹çš„é¢„è§ˆå’Œè®¾å®š
7. æ”¯æŒè¶…è¿‡8å¼ å›¾ç‰‡çš„è‡ªåŠ¨åˆ†é¡µåŠŸèƒ½
8. Logæ–‡ä»¶æŒ‰å¤©ç¼–å·ï¼Œæ¯å¤©é‡ç½®è®¡æ•°å™¨

## å¼€å‘æ¨¡å¼

ä½¿ç”¨nodemonè¿›è¡Œå¼€å‘ï¼š
```bash
npm run dev
```

## è®¸å¯è¯

MIT License